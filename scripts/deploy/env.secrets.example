# =============================================================================
# DEPLOYMENT ENVIRONMENT FILE
# =============================================================================
# This is your deployment .env file.
#
# SETUP:
#   1. Copy this file: cp env.secrets.example .env
#   2. Fill in your actual values below
#   3. Deploy: ./deploy.sh production (or test)
#
# ADDING NEW VARIABLES:
#   - Just add to .env - docker-compose automatically passes all variables
#   - No need to modify docker-compose.yml!
#   - Refer to ../../.env.example for all available options
# =============================================================================

# =============================================================================
# DEPLOYMENT CONFIG
# =============================================================================
NODE_ENV=production
IMAGE_NAME=chenxiaoyao6228/idea-forge:latest

# =============================================================================
# DATABASE
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_strong_password_here
POSTGRES_DB=ideaforge

# =============================================================================
# SECRETS (Generate with: openssl rand -base64 32)
# =============================================================================
SESSION_SECRET=CHANGE_ME_session_secret_here
JWT_SECRET=CHANGE_ME_jwt_secret_here
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_SECRET=CHANGE_ME_refresh_token_secret_here
REFRESH_TOKEN_EXPIRES_IN=7d
COLLAB_SECRET_KEY=CHANGE_ME_collab_secret_here

# =============================================================================
# OAUTH
# =============================================================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=https://yourdomain.com/api/auth/google/callback

GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_CALLBACK_URL=https://yourdomain.com/api/auth/github/callback

# =============================================================================
# EMAIL
# =============================================================================
RESEND_API_KEY=your_resend_api_key
EMAIL_FROM=noreply@yourdomain.com
SUPER_ADMIN_EMAIL=admin@yourdomain.com

# =============================================================================
# STORAGE - Choose ONE option
# =============================================================================
# Option 1: Self-hosted MinIO (uncomment to enable)
# ENABLE_MINIO_PROFILE=
# OSS_PROVIDER=minio
# MINIO_ROOT_USER=minio_admin
# MINIO_ROOT_PASSWORD=change_me_min_8_chars
# OSS_SECRET_ID=minio_admin
# OSS_SECRET_KEY=change_me_min_8_chars
# OSS_BUCKET=idea-forge-storage
# OSS_REGION=us-east-1
# OSS_ENDPOINT=http://minio:9000
# OSS_CDN_ENDPOINT=https://yourdomain.com/storage

# Option 2: Cloud OSS (default)
ENABLE_MINIO_PROFILE=skip
OSS_PROVIDER=cos
OSS_SECRET_ID=your_oss_secret_id
OSS_SECRET_KEY=your_oss_secret_key
OSS_BUCKET=your-bucket
OSS_REGION=ap-guangzhou
OSS_ENDPOINT=https://your-bucket.cos.ap-guangzhou.myqcloud.com
OSS_CDN_ENDPOINT=https://cdn.yourdomain.com

# =============================================================================
# AI CONFIGURATION
# =============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
AI_ENCRYPTION_KEY=CHANGE_ME_generate_32_char_key

# =============================================================================
# MONITORING (Optional)
# =============================================================================
SENTRY_DSN=

# =============================================================================
# CLIENT URLS
# =============================================================================
CLIENT_APP_URL=https://yourdomain.com
CLIENT_COLLAB_WS_URL=wss://yourdomain.com:5001/collaboration
CLIENT_SENTRY_DSN=

# =============================================================================
# PORTS (usually don't need to change)
# =============================================================================
NEST_API_PORT=5000
NEST_API_WS_PORT=5001
NOTIFICATION_DEDUPLICATION_WINDOW_SECONDS=21600

# For more options, see: https://github.com/chenxiaoyao6228/idea-forge/.env.example
